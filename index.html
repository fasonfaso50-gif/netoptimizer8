<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NetOptimizer Pro | Ultimate Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: '#3b82f6',
                        darkBtn: '#18181b',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --bg-primary: #0a0a0b;
            --bg-secondary: #111113;
            --border-color: #1f1f23;
            --text-main: #f4f4f5;
            --text-dim: #71717a;
        }

        .light {
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --border-color: #e2e8f0;
            --text-main: #0f172a;
            --text-dim: #64748b;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: var(--text-main);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            transition: background-color 0.5s ease;
        }

        .phone-container {
            width: 100%;
            max-width: 420px;
            height: 100%;
            background-color: var(--bg-primary);
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }

        .card-ultimate {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 16px;
            transition: all 0.3s ease;
        }

        .tab-bar {
            height: 80px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: env(safe-area-inset-bottom);
            z-index: 100;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-dim);
            transition: 0.3s;
        }
        .tab-item.active { color: var(--brand); }

        .content-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            scrollbar-width: none;
        }
        .content-scroll::-webkit-scrollbar { display: none; }

        .tab-panel {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }
        .tab-panel.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Сканирование */
        #optimizing-fx {
            position: absolute;
            inset: 0;
            background: rgba(59, 130, 246, 0.05);
            z-index: 200;
            display: none;
            pointer-events: none;
        }
        .scan-line {
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, transparent, var(--brand), transparent);
            box-shadow: 0 0 20px var(--brand);
            position: absolute;
            top: -10%;
            animation: scan 1.5s ease-in-out infinite;
        }
        @keyframes scan {
            0% { top: -10%; }
            100% { top: 110%; }
        }

        /* Логи */
        .log-line {
            font-size: 9px;
            line-height: 1.4;
            margin-bottom: 2px;
            border-left: 2px solid transparent;
            padding-left: 6px;
        }
        .log-info { border-color: #3b82f6; color: #94a3b8; }
        .log-warn { border-color: #f59e0b; color: #fbbf24; }
        .log-error { border-color: #ef4444; color: #f87171; }
        .log-success { border-color: #10b981; color: #34d399; }

        .sub-menu { display: none; }
        .sub-menu.active { display: block; }
    </style>
</head>
<body class="dark">

    <div class="phone-container shadow-2xl">
        
        <div id="optimizing-fx">
            <div class="scan-line"></div>
            <div id="fx-text-overlay" class="absolute inset-0 flex flex-col justify-center items-center gap-2 text-brand font-bold text-[10px] mono"></div>
        </div>

        <!-- Header -->
        <header class="h-20 flex items-center justify-between px-6 shrink-0 z-50">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full border-2 border-brand overflow-hidden shadow-lg shadow-brand/20">
                    <img src="https://i.pinimg.com/736x/1b/ac/96/1bac96cd70e67c3c67ffb25cd4f88da1.jpg" alt="User" class="w-full h-full object-cover">
                </div>
                <div class="flex flex-col">
                    <h1 class="text-md font-extrabold tracking-tight">
                        <span class="text-brand">NET</span>OPTIMIZER
                    </h1>
                    <span id="device-model-header" class="text-[9px] font-bold uppercase tracking-widest text-zinc-500">
                        NULL
                    </span>
                </div>
            </div>
            <button onclick="toggleTheme()" class="w-10 h-10 bg-zinc-800/20 rounded-full flex items-center justify-center transition-all active:scale-90">
                <div id="theme-icon-wrapper" class="transition-transform duration-500">
                    <i id="theme-icon" data-lucide="moon" class="w-5 h-5 text-white"></i>
                </div>
            </button>
        </header>

        <main class="flex-1 relative overflow-hidden">
            
            <!-- Dashboard -->
            <div id="panel-dashboard" class="tab-panel active content-scroll h-full">
                <div class="space-y-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="card-ultimate border-l-4 border-l-brand">
                            <p class="text-[10px] font-bold text-zinc-500 uppercase">Частота</p>
                            <div class="flex items-baseline gap-1 mt-1">
                                <span id="hz-val" class="text-3xl font-black mono tracking-tighter text-brand">NULL</span>
                                <span class="text-xs font-bold text-zinc-400">Hz</span>
                            </div>
                        </div>
                        <div class="card-ultimate">
                            <p class="text-[10px] font-bold text-zinc-500 uppercase">Батарея</p>
                            <div class="flex items-baseline gap-1 mt-1">
                                <span id="bat-val" class="text-3xl font-black mono tracking-tighter text-emerald-500">NULL</span>
                                <span class="text-xs font-bold text-zinc-400">%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card-ultimate flex flex-col gap-2">
                        <div class="flex justify-between items-center">
                            <p class="text-[10px] font-bold text-zinc-500 uppercase">Графический Чипсет</p>
                            <span class="text-[8px] bg-brand/20 text-brand px-2 py-0.5 rounded font-bold">HW_ACCEL</span>
                        </div>
                        <p id="gpu-info" class="text-xs font-bold truncate text-zinc-400 italic">Analysing hardware...</p>
                    </div>

                    <div class="card-ultimate h-40"><canvas id="mainChart"></canvas></div>
                    
                    <button id="opt-btn" onclick="runUltimateOptimization(this)" class="w-full h-16 bg-brand text-white font-black uppercase text-xs rounded-2xl shadow-xl shadow-brand/20 flex items-center justify-center gap-3 active:scale-95 transition-transform">
                        <i data-lucide="shield-check" class="w-5 h-5"></i> <span>Глубокая оптимизация</span>
                    </button>
                </div>
            </div>

            <!-- Ping Settings Tab -->
            <div id="panel-ping" class="tab-panel content-scroll h-full">
                <div class="space-y-6">
                    <h2 class="text-2xl font-black">Настройка Пинга</h2>
                    
                    <div class="card-ultimate p-6 text-center">
                        <div id="ping-circle" class="w-20 h-20 rounded-full border-4 border-zinc-800 mx-auto flex items-center justify-center mb-4 transition-all">
                            <span id="live-ping" class="text-2xl font-black mono">NULL</span>
                        </div>
                        <div class="flex justify-center gap-2">
                            <span class="text-[8px] font-bold px-2 py-1 bg-zinc-800 rounded">ICMP</span>
                            <span class="text-[8px] font-bold px-2 py-1 bg-zinc-800 rounded">IPV4</span>
                            <span id="ping-status" class="text-[8px] font-bold px-2 py-1 bg-emerald-500/20 text-emerald-500 rounded uppercase">Stable</span>
                        </div>
                    </div>

                    <div class="card-ultimate space-y-4">
                        <div class="flex flex-col gap-2">
                            <label class="text-[10px] font-bold text-zinc-500 uppercase">Интервал проверки (ms)</label>
                            <input type="range" min="500" max="5000" value="2000" class="w-full accent-brand">
                        </div>
                        <div class="flex flex-col gap-2">
                            <label class="text-[10px] font-bold text-zinc-500 uppercase">Целевой узел</label>
                            <select class="bg-zinc-800 border-none rounded-lg p-2 text-xs font-bold text-white outline-none">
                                <option>google.dns (8.8.8.8)</option>
                                <option>cloudflare.dns (1.1.1.1)</option>
                                <option>local.gateway</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Real Logs -->
            <div id="panel-security" class="tab-panel content-scroll h-full">
                <div class="space-y-4">
                    <div class="flex justify-between items-end">
                        <h2 class="text-2xl font-black">Логи ядра</h2>
                        <span class="text-[9px] mono text-brand animate-pulse">LIVE_STREAMING</span>
                    </div>
                    <div id="real-logs" class="card-ultimate h-[400px] flex flex-col-reverse p-4 bg-black/90 border-zinc-800 mono overflow-hidden">
                        <!-- Логи вставляются сюда -->
                    </div>
                </div>
            </div>

            <!-- Settings -->
            <div id="panel-settings" class="tab-panel content-scroll h-full">
                <div id="menu-main" class="sub-menu active space-y-6">
                    <h2 class="text-2xl font-black">Сведения</h2>
                    
                    <p class="text-[10px] font-bold text-zinc-500 uppercase px-1">Аппаратное обеспечение</p>
                    <div class="card-ultimate p-0 overflow-hidden divide-y divide-border-color">
                        <div onclick="showSubMenu('display')" class="p-4 flex items-center justify-between cursor-pointer active:bg-brand/5">
                            <div class="flex items-center gap-3"><i data-lucide="monitor" class="w-4 h-4"></i><span class="text-sm">Матрица экрана</span></div>
                            <span class="text-[10px] font-bold text-brand">DETECT</span>
                        </div>
                        <div onclick="showSubMenu('battery')" class="p-4 flex items-center justify-between cursor-pointer active:bg-brand/5">
                            <div class="flex items-center gap-3"><i data-lucide="zap" class="w-4 h-4"></i><span class="text-sm">Контроллер заряда</span></div>
                            <span class="text-[10px] font-bold text-brand">ACTIVE</span>
                        </div>
                    </div>

                    <p class="text-[10px] font-bold text-zinc-500 uppercase px-1">Окружение</p>
                    <div class="card-ultimate space-y-3">
                        <div class="flex justify-between text-xs"><span class="text-zinc-500">Система</span><span id="os-ver" class="font-bold text-zinc-400 italic">NULL</span></div>
                        <div class="flex justify-between text-xs"><span class="text-zinc-500">Ядро (Arch)</span><span id="platform-val" class="font-bold text-zinc-400 italic">NULL</span></div>
                    </div>
                </div>

                <div id="menu-display" class="sub-menu space-y-6">
                    <button onclick="showSubMenu('main')" class="flex items-center gap-2 text-brand text-xs font-bold uppercase mb-4"><i data-lucide="arrow-left" class="w-4 h-4"></i> Назад</button>
                    <h2 class="text-2xl font-black">Дисплей</h2>
                    <div id="screen-data-list" class="card-ultimate space-y-4"></div>
                </div>

                <div id="menu-battery" class="sub-menu space-y-6">
                    <button onclick="showSubMenu('main')" class="flex items-center gap-2 text-brand text-xs font-bold uppercase mb-4"><i data-lucide="arrow-left" class="w-4 h-4"></i> Назад</button>
                    <h2 class="text-2xl font-black">Энергия</h2>
                    <div id="battery-data-list" class="card-ultimate space-y-4"></div>
                </div>
            </div>
        </main>

        <!-- Tab Bar -->
        <nav class="tab-bar">
            <button onclick="changeTab('dashboard', this)" class="tab-item active"><i data-lucide="layout-dashboard" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1">ОБЗОР</span></button>
            <button onclick="changeTab('ping', this)" class="tab-item"><i data-lucide="bar-chart-3" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1">ПИНГ</span></button>
            <button onclick="changeTab('security', this)" class="tab-item"><i data-lucide="file-text" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1">ЛОГИ</span></button>
            <button onclick="changeTab('settings', this)" class="tab-item"><i data-lucide="info" class="w-6 h-6"></i><span class="text-[9px] font-bold mt-1">ИНФО</span></button>
        </nav>
    </div>

    <script>
        // --- СИСТЕМНАЯ ДИАГНОСТИКА ---
        function getDeviceInfo() {
            const ua = navigator.userAgent;
            const platform = navigator.platform;
            
            // Определение реального устройства
            let device = "Desktop Agent";
            if (/android/i.test(ua)) device = "Android Device";
            else if (/iPad|iPhone|iPod/.test(ua)) device = "iOS Device";
            
            document.getElementById('device-model-header').innerText = device;
            document.getElementById('os-ver').innerText = device !== "Desktop Agent" ? "System Core 14.x" : "Windows/MacOS (NULL)";
            document.getElementById('platform-val').innerText = platform;

            // GPU - Графический процессор есть на всех мобильных и ПК
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            if (gl) {
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                const renderer = debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Software Renderer";
                document.getElementById('gpu-info').innerText = renderer;
                addLog(`GPU detected: ${renderer}`, 'success');
            } else {
                addLog("GPU Hardware acceleration disabled", 'warn');
            }

            // Частота (Hz)
            requestAnimationFrame((t1) => {
                requestAnimationFrame((t2) => {
                    const hz = Math.round(1000 / (t2 - t1));
                    document.getElementById('hz-val').innerText = hz;
                    addLog(`Screen refresh rate: ${hz}Hz identified`, 'info');
                });
            });

            // Батарея (Real API)
            if (navigator.getBattery) {
                navigator.getBattery().then(bat => {
                    const update = () => {
                        const lvl = Math.round(bat.level * 100);
                        document.getElementById('bat-val').innerText = lvl;
                        addLog(`Power level: ${lvl}% [${bat.charging ? 'Charging' : 'Discharging'}]`, 'info');
                        renderBatteryMenu(bat);
                    };
                    bat.onlevelchange = update;
                    bat.onchargingchange = update;
                    update();
                });
            } else {
                document.getElementById('bat-val').innerText = "NULL";
                addLog("Battery API not supported on this kernel", 'warn');
            }
        }

        function renderScreenMenu() {
            const list = document.getElementById('screen-data-list');
            list.innerHTML = `
                <div class="flex justify-between border-b border-border-color pb-2"><span class="text-xs text-zinc-500">Разрешение</span><span class="text-xs font-bold">${window.screen.width}x${window.screen.height}</span></div>
                <div class="flex justify-between border-b border-border-color pb-2"><span class="text-xs text-zinc-500">Пиксель-фактор</span><span class="text-xs font-bold">${window.devicePixelRatio}x</span></div>
                <div class="flex justify-between border-b border-border-color pb-2"><span class="text-xs text-zinc-500">Гамма</span><span class="text-xs font-bold">${window.screen.colorDepth}-bit</span></div>
                <div class="flex justify-between"><span class="text-xs text-zinc-500">Touch Support</span><span class="text-xs font-bold text-emerald-500">${'ontouchstart' in window ? 'TRUE' : 'FALSE'}</span></div>
            `;
        }

        function renderBatteryMenu(bat) {
            const list = document.getElementById('battery-data-list');
            if(!list) return;
            list.innerHTML = `
                <div class="flex justify-between border-b border-border-color pb-2"><span class="text-xs text-zinc-500">Заряд</span><span class="text-xs font-bold">${Math.round(bat.level * 100)}%</span></div>
                <div class="flex justify-between border-b border-border-color pb-2"><span class="text-xs text-zinc-500">Статус</span><span class="text-xs font-bold">${bat.charging ? 'CONNECTED' : 'STANDALONE'}</span></div>
                <div class="flex justify-between"><span class="text-xs text-zinc-500">Battery API</span><span class="text-xs font-bold text-emerald-500">VERIFIED</span></div>
            `;
        }

        function addLog(msg, type = 'info') {
            const container = document.getElementById('real-logs');
            const time = new Date().toLocaleTimeString('ru-RU', { hour12: false });
            const div = document.createElement('div');
            div.className = `log-line log-${type}`;
            div.innerHTML = `<span class="opacity-40">[${time}]</span> <span class="font-bold">${type.toUpperCase()}:</span> ${msg}`;
            container.prepend(div);
        }

        // --- ОПТИМИЗАЦИЯ ---
        function runUltimateOptimization(btn) {
            btn.disabled = true;
            const fx = document.getElementById('optimizing-fx');
            const textOverlay = document.getElementById('fx-text-overlay');
            fx.style.display = 'block';
            
            const tasks = ["SYS_SCAN", "MEM_FLUSH", "CPU_REBALANCE", "TEMP_CLEAN", "DNS_FLUSH", "TCP_BOOST"];
            let i = 0;
            const interval = setInterval(() => {
                const line = document.createElement('div');
                line.innerText = `RUNNING: ${tasks[i % tasks.length]} ... SUCCESS`;
                textOverlay.prepend(line);
                if(textOverlay.children.length > 8) textOverlay.lastChild.remove();
                
                addLog(`Executing optimization task: ${tasks[i % tasks.length]}`, 'info');
                i++;
                if(i > 20) {
                    clearInterval(interval);
                    fx.style.display = 'none';
                    textOverlay.innerHTML = '';
                    btn.disabled = false;
                    addLog("FULL SYSTEM OPTIMIZATION COMPLETED", "success");
                }
            }, 150);
        }

        // --- ГРАФИКИ ---
        let mainChart;
        function initCharts() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            mainChart = new Chart(ctx, {
                type: 'line',
                data: { labels: Array(30).fill(''), datasets: [{ data: Array(30).fill(0), borderColor: '#3b82f6', borderWidth: 2, pointRadius: 0, tension: 0.4, fill: true, backgroundColor: 'rgba(59, 130, 246, 0.05)' }] },
                options: { maintainAspectRatio: false, scales: { y: { display: false }, x: { display: false } }, plugins: { legend: { display: false } }, animation: { duration: 0 } }
            });
        }

        async function checkPing() {
            const start = Date.now();
            try {
                await fetch('https://8.8.8.8', { mode: 'no-cors', cache: 'no-cache' }).catch(() => {});
                const lat = Date.now() - start;
                document.getElementById('live-ping').innerText = lat + 'ms';
                const circle = document.getElementById('ping-circle');
                circle.style.borderColor = lat < 100 ? '#10b981' : (lat < 250 ? '#f59e0b' : '#ef4444');
            } catch(e) { 
                document.getElementById('live-ping').innerText = 'NULL';
            }
        }

        // --- ТЕМА И НАВИГАЦИЯ ---
        function toggleTheme() {
            const body = document.body;
            const wrapper = document.getElementById('theme-icon-wrapper');
            wrapper.style.transform = 'rotate(360deg)';
            setTimeout(() => wrapper.style.transform = 'rotate(0deg)', 500);

            if (body.classList.contains('dark')) {
                body.classList.replace('dark', 'light');
                document.getElementById('theme-icon').style.color = '#000';
                addLog("Visual engine switched to LIGHT_MODE", 'warn');
            } else {
                body.classList.replace('light', 'dark');
                document.getElementById('theme-icon').style.color = '#fff';
                addLog("Visual engine switched to DARK_MODE", 'warn');
            }
            lucide.createIcons();
        }

        function changeTab(panelId, btn) {
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(b => b.classList.remove('active'));
            document.getElementById(`panel-${panelId}`).classList.add('active');
            btn.classList.add('active');
            if(panelId === 'settings') showSubMenu('main');
        }

        function showSubMenu(menuId) {
            document.querySelectorAll('.sub-menu').forEach(m => m.classList.remove('active'));
            document.getElementById(`menu-${menuId}`).classList.add('active');
            if(menuId === 'display') renderScreenMenu();
        }

        // --- LOOP ---
        setInterval(() => {
            if(mainChart) {
                mainChart.data.datasets[0].data.push(Math.random() * 20 + 5);
                mainChart.data.datasets[0].data.shift();
                mainChart.update('none');
            }
            checkPing();
        }, 2000);

        window.onload = () => {
            getDeviceInfo();
            initCharts();
            addLog("Core Kernel 2.5.0 initialised", 'success');
            lucide.createIcons();
        };
    </script>
</body>
</html>
